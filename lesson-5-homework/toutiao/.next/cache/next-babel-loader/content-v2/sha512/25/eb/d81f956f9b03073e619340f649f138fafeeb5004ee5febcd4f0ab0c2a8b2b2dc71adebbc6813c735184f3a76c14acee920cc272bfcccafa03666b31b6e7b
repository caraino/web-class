{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\vscode\\\\projects\\\\homework\\\\lesson-5-homework\\\\toutiao\\\\components\\\\Main\\\\index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useEffect, useState } from 'react';\nexport default function Main() {\n  const {\n    0: list,\n    1: setList\n  } = useState([]);\n\n  function getNews() {\n    fetch(\"/api/news\").then(async res => {\n      const resp = await res.json();\n      setList(l => [...l, ...resp.data]);\n    });\n  }\n\n  useEffect(() => {\n    getNews();\n  }, []);\n\n  function DateDiff(startTime) {\n    var date = new Date().valueOf() / 1000;\n    var timeDiff = date - startTime;\n\n    if (Math.floor(timeDiff / 86400 / 365) >= 1) {\n      return Math.floor(timeDiff / 86400 / 365) + \"年前\";\n    } else if (Math.floor(timeDiff / 86400 / 30) >= 1) {\n      return Math.floor(timeDiff / 86400 / 30) + \"月前\";\n    } else if (Math.floor(timeDiff / 86400) >= 1) {\n      return Math.floor(timeDiff / 86400) + \"天前\";\n    } else if (Math.floor(timeDiff / 3600) >= 1) {\n      return Math.floor(timeDiff / 3600) + \"小时前\";\n    } else if (Math.floor(timeDiff / 60) >= 1) {\n      return Math.floor(timeDiff / 60) + \"分钟前\";\n    } else {\n      return \"刚刚\";\n    }\n  } // const mainRef=useRef();\n  // console.log(mainRef.current)\n\n\n  const {\n    0: scrollPosition,\n    1: setScrollPosition\n  } = useState({});\n  useEffect(() => {\n    const handler = () => {\n      setScrollPosition({\n        scrollH: document.documentElement.scrollHeight,\n        clientH: document.documentElement.clientHeight,\n        scrollT: document.documentElement.scrollTop\n      });\n      let scrollH = document.documentElement.scrollHeight,\n          clientH = document.documentElement.clientHeight,\n          scrollT = document.documentElement.scrollTop;\n      console.log(scrollH - clientH - scrollT);\n\n      if (scrollPosition.scrollH - scrollPosition.clientH <= scrollPosition.scrollT + 400) {\n        getNews();\n      }\n    };\n\n    window.addEventListener('scroll', throttle(handler, 500), {\n      passive: true\n    });\n    return () => {\n      window.removeEventListener('scroll', throttle(handler, 500));\n    };\n  }, []); // console.log(scrollPosition.scrollH-scrollPosition.clientH-scrollPosition.scrollT)\n  // 简单的节流函数\n\n  var throttle = function (func, delay) {\n    var timer = null;\n    return function () {\n      var context = this;\n      var args = arguments;\n\n      if (!timer) {\n        timer = setTimeout(function () {\n          func.apply(context, args);\n          timer = null;\n        }, delay);\n      }\n    };\n  }; // if(scrollPosition.scrollH-scrollPosition.clientH<=scrollPosition.scrollT+400) {\n  //     getNews();   \n  // }\n  // console.log(list)\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-4146117004\" + \" \" + \"center-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-4146117004\" + \" \" + \"msg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-4146117004\" + \" \" + \"news-list\",\n        children: list.map(i => {\n          if (i.img_url === 'null') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"jsx-4146117004\" + \" \" + \"mode1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-4146117004\" + \" \" + \"news-title\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: i.source_url,\n                  className: \"jsx-4146117004\" + \" \" + \"news-link\",\n                  children: i.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-4146117004\" + \" \" + \"news-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-4146117004\" + \" \" + \"news-footer-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#!\",\n                    className: \"jsx-4146117004\" + \" \" + \"news-tag tag-politic\",\n                    children: i.tag\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: i.url,\n                    className: \"jsx-4146117004\" + \" \" + \"news-media-img\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: i.source_img,\n                      className: \"jsx-4146117004\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 88\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: i.url,\n                    className: \"jsx-4146117004\" + \" \" + \"news-about\",\n                    children: [\"\\xA0\", i.source, \"\\xA0\\xB7\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#!\",\n                    className: \"jsx-4146117004\" + \" \" + \"news-about\",\n                    children: [\"\\xA0\", i.comments, \"\\u8BC4\\u8BBA\\xA0\\xB7\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-4146117004\" + \" \" + \"news-time\",\n                    children: [\"\\xA0\", DateDiff(i.time)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-4146117004\" + \" \" + \"news-footer-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-4146117004\" + \" \" + \"dislike\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"jsx-4146117004\" + \" \" + \"close\",\n                      children: \"X\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 33\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"jsx-4146117004\" + \" \" + \"mode2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-4146117004\" + \" \" + \"mode2-left\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: i.source_url,\n                  className: \"jsx-4146117004\" + \" \" + \"mode2-img\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: i.img_url,\n                    className: \"jsx-4146117004\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-4146117004\" + \" \" + \"mode2-right\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-4146117004\" + \" \" + \"mode2-news\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-4146117004\" + \" \" + \"news-title\",\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: i.source_url,\n                      className: \"jsx-4146117004\" + \" \" + \"news-link\",\n                      children: i.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-4146117004\" + \" \" + \"news-footer\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-4146117004\" + \" \" + \"news-footer-left\",\n                      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                        href: \"#!\",\n                        className: \"jsx-4146117004\" + \" \" + \"news-tag tag-politic\",\n                        children: i.tag\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: i.url,\n                        className: \"jsx-4146117004\" + \" \" + \"news-media-img\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: i.source_img,\n                          className: \"jsx-4146117004\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 133,\n                          columnNumber: 92\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 133,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: i.url,\n                        className: \"jsx-4146117004\" + \" \" + \"news-about\",\n                        children: [\"\\xA0\", i.source, \"\\xA0\\xB7\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: \"#!\",\n                        className: \"jsx-4146117004\" + \" \" + \"news-about\",\n                        children: [\"\\xA0\", i.comments, \"\\u8BC4\\u8BBA\\xA0\\xB7\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"jsx-4146117004\" + \" \" + \"news-time\",\n                        children: [\"\\xA0\", DateDiff(i.time)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 136,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-4146117004\" + \" \" + \"news-footer-right\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-4146117004\" + \" \" + \"dislike\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"jsx-4146117004\" + \" \" + \"close\",\n                          children: \"X\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 140,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 33\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"4146117004\",\n      children: \".center-content.jsx-4146117004{width:660px;display:inline-block;margin:0 auto;}.mode1.jsx-4146117004{padding:10px 0;border-bottom:1px solid #e8e8e8;}.news-title.jsx-4146117004{font-size:20px;margin-bottom:4px;line-height:1.3;font-weight:700;max-height:52px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.news-link.jsx-4146117004{color:#222;}.news-footer.jsx-4146117004{color:#999;margin-top:10px;height:20px;}.news-footer-left.jsx-4146117004{display:inline-block;vertical-align:middle;line-height:20px;font-size:0;}.news-footer-left.jsx-4146117004>*.jsx-4146117004{display:inline-block;vertical-align:middle;line-height:1;font-size:14px;}.news-tag.jsx-4146117004{font-size:12px;margin-right:10px;padding:1px 2px;border:1px solid #87a5b5;color:#87a5b5;}.tag-video.jsx-4146117004{border:1px solid #ff7920;color:#ff7920;}.news-media-img.jsx-4146117004{width:18px;height:18px;margin-right:2px;border-radius:50%;overflow:hidden;}.news-media-img.jsx-4146117004 img.jsx-4146117004{width:18px;height:18px;border-radius:50%;}.news-about.jsx-4146117004{font-size:14px;color:#777;}.news-time.jsx-4146117004{color:#777;}.mode2.jsx-4146117004{height:102px;padding:10px 0;border-bottom:1px solid #e8e8e8;}.mode2-left.jsx-4146117004{width:158px;height:102px;margin-right:16px;overflow:hidden;float:left;}.mode2-img.jsx-4146117004{display:inline-block;position:relative;-webkit-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d;}.mode2-img.jsx-4146117004>img.jsx-4146117004{width:158px;height:102px;-webkit-transition:all 0.5s;transition:all 0.5s;}.video-tip.jsx-4146117004{position:absolute;right:8px;bottom:8px;padding:0 6px 0 18px;background-color:rgba(0,0,0,0.7);border-radius:10px;font-size:12px;color:#fff;height:22px;line-height:22px;}.video-tip.jsx-4146117004::before{content:\\\"\\\";position:absolute;top:7px;left:8px;border-style:solid;border-width:5px;border-color:transparent transparent transparent #fff;}.mode2-right.jsx-4146117004{overflow:hidden;height:100%;position:relative;}.mode2-news.jsx-4146117004{display:inline-block;width:100%;vertical-align:middle;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.news-footer-right.jsx-4146117004{float:right;}.dislike.jsx-4146117004{height:20px;width:20px;}.close.jsx-4146117004{font-size:12px;color:#ddd;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFx2c2NvZGVcXHByb2plY3RzXFxob21ld29ya1xcbGVzc29uLTUtaG9tZXdvcmtcXHRvdXRpYW9cXGNvbXBvbmVudHNcXE1haW5cXGluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdKd0IsQUFHNkIsQUFNTyxBQUtBLEFBYUosQUFJQSxBQU1VLEFBT0EsQUFPTixBQVFVLEFBS2QsQUFRQSxBQU1JLEFBS0osQUFJRSxBQU1ELEFBUVMsQUFNVCxBQU1NLEFBYVAsQUFVSyxBQU1LLEFBU1QsQUFJQSxBQUtHLFdBcEluQixBQUlvQixBQWlDSixBQVFBLEFBV2hCLEFBMkNzQixDQTNIRCxBQTBGSixBQWNBLEFBNENqQixBQUllLENBcEVJLEVBOUVpQixBQUtkLEFBcUNBLEFBMkJQLEFBa0ZBLENBeEJDLEVBdkJGLEdBNUVZLEFBT0EsQUF5REosQUF5Q1AsRUE3RU0sQUFRQyxBQW1GdEIsRUFqR2tCLEFBbUNJLEFBY0UsQ0E3QnhCLEFBa0ZBLENBaklnQixDQXdEb0IsQUEwQnJCLEFBdUJPLENBVlYsR0FnQmMsQ0EzSVosQUFXTSxBQXFDQSxJQTRFUCxFQS9GYixBQTJCQSxBQTBDZ0MsQUFhUCxDQWpESCxDQVF0QixFQXBDcUIsQUFPSCxBQWtERSxHQWtDRyxBQVN2QixDQXJJQSxBQUtBLEVBTW9CLEFBcUNTLEtBMkZQLEdBbEdILENBcUJDLENBNkJMLENBekRDLEFBa0RoQixBQTJCd0MsS0FuR3BCLEFBaUhDLEtBakNyQixFQXpEQSxBQU9BLEFBa0dZLENBcENaLENBdkRrQixBQWNsQixNQThFK0IsQ0FoSVgsQ0FpSHNDLE1BNUUxRCxLQThEdUIsSUFsR0ksZUFtR1IsUUFsR0ssT0FtR1QsUUFoQmYsQ0E2QkEsRUFaZ0IsRUFuR2dCLFVBb0dYLGlCQUNyQixDQXBHeUIsS0E2SHpCLGdCQTVIQSIsImZpbGUiOiJEOlxcdnNjb2RlXFxwcm9qZWN0c1xcaG9tZXdvcmtcXGxlc3Nvbi01LWhvbWV3b3JrXFx0b3V0aWFvXFxjb21wb25lbnRzXFxNYWluXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1haW4oKSB7XHJcbiAgICBjb25zdCBbbGlzdCwgc2V0TGlzdF0gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBmdW5jdGlvbiBnZXROZXdzKCkge1xyXG4gICAgICAgIGZldGNoKFwiL2FwaS9uZXdzXCIpLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgc2V0TGlzdCggbD0+Wy4uLmwsLi4ucmVzcC5kYXRhXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgZ2V0TmV3cygpXHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0ZURpZmYoc3RhcnRUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSAobmV3IERhdGUoKSkudmFsdWVPZigpIC8gMTAwMDtcclxuICAgICAgICB2YXIgdGltZURpZmYgPSBkYXRlIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgaWYgKE1hdGguZmxvb3IodGltZURpZmYgLyA4NjQwMCAvIDM2NSkgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDg2NDAwIC8gMzY1KSArIFwi5bm05YmNXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChNYXRoLmZsb29yKHRpbWVEaWZmIC8gODY0MDAgLyAzMCkgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDg2NDAwIC8gMzApICsgXCLmnIjliY1cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguZmxvb3IodGltZURpZmYgLyA4NjQwMCkgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDg2NDAwKSArIFwi5aSp5YmNXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChNYXRoLmZsb29yKHRpbWVEaWZmIC8gMzYwMCkgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDM2MDApICsgXCLlsI/ml7bliY1cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguZmxvb3IodGltZURpZmYgLyA2MCkgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDYwKSArIFwi5YiG6ZKf5YmNXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwi5Yia5YiaXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zdCBtYWluUmVmPXVzZVJlZigpO1xyXG4gICAgLy8gY29uc29sZS5sb2cobWFpblJlZi5jdXJyZW50KVxyXG5cclxuICAgIGNvbnN0IFtzY3JvbGxQb3NpdGlvbiwgc2V0U2Nyb2xsUG9zaXRpb25dID0gdXNlU3RhdGUoe30pO1xyXG5cclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICBzZXRTY3JvbGxQb3NpdGlvbih7XHJcbiAgICAgICAgICAgIHNjcm9sbEg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsIFxyXG4gICAgICAgICAgICBjbGllbnRIOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICBzY3JvbGxUOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBsZXQgc2Nyb2xsSD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LCBcclxuICAgICAgICAgICAgICBjbGllbnRIPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICAgIHNjcm9sbFQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHNjcm9sbEgtY2xpZW50SC1zY3JvbGxUKVxyXG4gICAgICAgICAgaWYoc2Nyb2xsUG9zaXRpb24uc2Nyb2xsSC1zY3JvbGxQb3NpdGlvbi5jbGllbnRIPD1zY3JvbGxQb3NpdGlvbi5zY3JvbGxUKzQwMCkge1xyXG4gICAgICAgICAgICBnZXROZXdzKCk7ICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsdGhyb3R0bGUoaGFuZGxlciw1MDApLCB7IHBhc3NpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhyb3R0bGUoaGFuZGxlciw1MDApKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKHNjcm9sbFBvc2l0aW9uLnNjcm9sbEgtc2Nyb2xsUG9zaXRpb24uY2xpZW50SC1zY3JvbGxQb3NpdGlvbi5zY3JvbGxUKVxyXG5cclxuICAgIC8vIOeugOWNleeahOiKgua1geWHveaVsFxyXG4gICAgdmFyIHRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgZGVsYXkpIHsgICAgICAgICAgICBcclxuICAgICAgICB2YXIgdGltZXIgPSBudWxsOyAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpczsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXRpbWVyKSB7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbDsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfSAgICBcclxuXHJcbiAgICAvLyBpZihzY3JvbGxQb3NpdGlvbi5zY3JvbGxILXNjcm9sbFBvc2l0aW9uLmNsaWVudEg8PXNjcm9sbFBvc2l0aW9uLnNjcm9sbFQrNDAwKSB7XHJcbiAgICAvLyAgICAgZ2V0TmV3cygpOyAgIFxyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyBjb25zb2xlLmxvZyhsaXN0KVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjZW50ZXItY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtc2dcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXdzLWxpc3RcIj5cclxuICAgICAgICAgICAgICAgICAgICB7bGlzdC5tYXAoKGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaS5pbWdfdXJsPT09J251bGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kZTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXdzLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJuZXdzLWxpbmtcIiBocmVmPXtpLnNvdXJjZV91cmx9PntpLnRpdGxlfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV3cy1mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV3cy1mb290ZXItbGVmdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIm5ld3MtdGFnIHRhZy1wb2xpdGljXCIgaHJlZj1cIiMhXCI+e2kudGFnfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJuZXdzLW1lZGlhLWltZ1wiIGhyZWY9e2kudXJsfT48aW1nIHNyYz17aS5zb3VyY2VfaW1nfSAvPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJuZXdzLWFib3V0XCIgaHJlZj17aS51cmx9PiZuYnNwO3tpLnNvdXJjZX0mbmJzcDvCtzwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJuZXdzLWFib3V0XCIgaHJlZj1cIiMhXCI+Jm5ic3A7e2kuY29tbWVudHN96K+E6K66Jm5ic3A7wrc8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibmV3cy10aW1lXCI+Jm5ic3A7e0RhdGVEaWZmKGkudGltZSl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5ld3MtZm9vdGVyLXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXNsaWtlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNsb3NlXCI+WDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RlMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGUyLWxlZnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIm1vZGUyLWltZ1wiIGhyZWY9e2kuc291cmNlX3VybH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e2kuaW1nX3VybH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kZTItcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kZTItbmV3c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV3cy10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIm5ld3MtbGlua1wiIGhyZWY9e2kuc291cmNlX3VybH0+e2kudGl0bGV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5ld3MtZm9vdGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXdzLWZvb3Rlci1sZWZ0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIm5ld3MtdGFnIHRhZy1wb2xpdGljXCIgaHJlZj1cIiMhXCI+e2kudGFnfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwibmV3cy1tZWRpYS1pbWdcIiBocmVmPXtpLnVybH0+PGltZyBzcmM9e2kuc291cmNlX2ltZ30gLz48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIm5ld3MtYWJvdXRcIiBocmVmPXtpLnVybH0+Jm5ic3A7e2kuc291cmNlfSZuYnNwO8K3PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJuZXdzLWFib3V0XCIgaHJlZj1cIiMhXCI+Jm5ic3A7e2kuY29tbWVudHN96K+E6K66Jm5ic3A7wrc8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5ld3MtdGltZVwiPiZuYnNwO3tEYXRlRGlmZihpLnRpbWUpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5ld3MtZm9vdGVyLXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGlzbGlrZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY2xvc2VcIj5YPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAgICAuY2VudGVyLWNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDY2MHB4O1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC5tb2RlMSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZThlOGU4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubmV3cy10aXRsZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS4zO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDogNTJweDtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xyXG4gICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1saW5lLWNsYW1wOiAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubmV3cy1saW5rIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzIyMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtZm9vdGVyIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzk5OTtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtZm9vdGVyLWxlZnQge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtZm9vdGVyLWxlZnQ+KiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubmV3cy10YWcge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDJweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODdhNWI1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjODdhNWI1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAudGFnLXZpZGVvIHtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmY3OTIwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmY3OTIwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubmV3cy1tZWRpYS1pbWcge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDJweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtbWVkaWEtaW1nIGltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtYWJvdXQge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzc3NztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm5ld3MtdGltZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM3Nzc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC5tb2RlMiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDJweDtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlOGU4ZTg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC5tb2RlMi1sZWZ0IHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTU4cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDJweDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm1vZGUyLWltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubW9kZTItaW1nPmltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE1OHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC52aWRlby10aXAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgNnB4IDAgMThweDtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAudmlkZW8tdGlwOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogN3B4O1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDhweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgI2ZmZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLm1vZGUyLXJpZ2h0IHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC5tb2RlMi1uZXdzIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAubmV3cy1mb290ZXItcmlnaHQge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiByaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLmRpc2xpa2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLmNsb3NlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNkZGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8Lz5cclxuICAgIClcclxufSJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\vscode\\\\\\\\projects\\\\\\\\homework\\\\\\\\lesson-5-homework\\\\\\\\toutiao\\\\\\\\components\\\\\\\\Main\\\\\\\\index.js */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["D:/vscode/projects/homework/lesson-5-homework/toutiao/components/Main/index.js"],"names":["React","useEffect","useState","Main","list","setList","getNews","fetch","then","res","resp","json","l","data","DateDiff","startTime","date","Date","valueOf","timeDiff","Math","floor","scrollPosition","setScrollPosition","handler","scrollH","document","documentElement","scrollHeight","clientH","clientHeight","scrollT","scrollTop","console","log","window","addEventListener","throttle","passive","removeEventListener","func","delay","timer","context","args","arguments","setTimeout","apply","map","i","img_url","source_url","title","tag","url","source_img","source","comments","time"],"mappings":"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","sourcesContent":["import React, { useEffect, useState} from 'react'\r\n\r\nexport default function Main() {\r\n    const [list, setList] = useState([]);\r\n    function getNews() {\r\n        fetch(\"/api/news\").then(async (res) => {\r\n            const resp = await res.json();\r\n            setList( l=>[...l,...resp.data]);\r\n        });\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getNews()\r\n    }, []);\r\n\r\n    function DateDiff(startTime) {\r\n        var date = (new Date()).valueOf() / 1000;\r\n        var timeDiff = date - startTime\r\n        if (Math.floor(timeDiff / 86400 / 365) >= 1) {\r\n            return Math.floor(timeDiff / 86400 / 365) + \"年前\";\r\n        } else if (Math.floor(timeDiff / 86400 / 30) >= 1) {\r\n            return Math.floor(timeDiff / 86400 / 30) + \"月前\";\r\n        } else if (Math.floor(timeDiff / 86400) >= 1) {\r\n            return Math.floor(timeDiff / 86400) + \"天前\";\r\n        } else if (Math.floor(timeDiff / 3600) >= 1) {\r\n            return Math.floor(timeDiff / 3600) + \"小时前\";\r\n        } else if (Math.floor(timeDiff / 60) >= 1) {\r\n            return Math.floor(timeDiff / 60) + \"分钟前\";\r\n        } else {\r\n            return \"刚刚\";\r\n        }\r\n\r\n    }\r\n\r\n    // const mainRef=useRef();\r\n    // console.log(mainRef.current)\r\n\r\n    const [scrollPosition, setScrollPosition] = useState({});\r\n\r\n\r\n    useEffect(() => {\r\n        \r\n        const handler = () => {\r\n          setScrollPosition({\r\n            scrollH: document.documentElement.scrollHeight, \r\n            clientH: document.documentElement.clientHeight,\r\n            scrollT: document.documentElement.scrollTop,\r\n          });\r\n          let scrollH=document.documentElement.scrollHeight, \r\n              clientH= document.documentElement.clientHeight,\r\n              scrollT=document.documentElement.scrollTop;\r\n          console.log(scrollH-clientH-scrollT)\r\n          if(scrollPosition.scrollH-scrollPosition.clientH<=scrollPosition.scrollT+400) {\r\n            getNews();   \r\n          }\r\n        };\r\n\r\n        window.addEventListener('scroll',throttle(handler,500), { passive: true });\r\n\r\n        return () => {\r\n          window.removeEventListener('scroll', throttle(handler,500));\r\n        };\r\n    }, []);\r\n\r\n    // console.log(scrollPosition.scrollH-scrollPosition.clientH-scrollPosition.scrollT)\r\n\r\n    // 简单的节流函数\r\n    var throttle = function(func, delay) {            \r\n        var timer = null;            \r\n        return function() {                \r\n            var context = this;               \r\n            var args = arguments;                \r\n            if (!timer) {                    \r\n                timer = setTimeout(function() {                        \r\n                    func.apply(context, args);                        \r\n                    timer = null;                    \r\n                }, delay);                \r\n            }            \r\n        }        \r\n    }    \r\n\r\n    // if(scrollPosition.scrollH-scrollPosition.clientH<=scrollPosition.scrollT+400) {\r\n    //     getNews();   \r\n    // }\r\n    \r\n    // console.log(list)\r\n\r\n    return (\r\n        <>\r\n            <div className=\"center-content\">\r\n                <div className=\"msg\">\r\n                </div>\r\n                <div className=\"news-list\">\r\n                    {list.map((i) => {\r\n                        if(i.img_url==='null') {\r\n                            return (\r\n                                <div className=\"mode1\">\r\n                                    <div className=\"news-title\">\r\n                                        <a className=\"news-link\" href={i.source_url}>{i.title}</a>\r\n                                    </div>\r\n                                    <div className=\"news-footer\">\r\n                                        <div className=\"news-footer-left\">\r\n                                            <a className=\"news-tag tag-politic\" href=\"#!\">{i.tag}</a>\r\n                                            <a className=\"news-media-img\" href={i.url}><img src={i.source_img} /></a>\r\n                                            <a className=\"news-about\" href={i.url}>&nbsp;{i.source}&nbsp;·</a>\r\n                                            <a className=\"news-about\" href=\"#!\">&nbsp;{i.comments}评论&nbsp;·</a>\r\n                                            <span className=\"news-time\">&nbsp;{DateDiff(i.time)}</span>\r\n                                        </div>\r\n                                        <div className=\"news-footer-right\">\r\n                                            <div className=\"dislike\">\r\n                                                <span className=\"close\">X</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }else {\r\n                            return (\r\n                                <div className=\"mode2\">\r\n                                    <div className=\"mode2-left\">\r\n                                        <a className=\"mode2-img\" href={i.source_url}>\r\n                                            <img src={i.img_url} />\r\n                                        </a>\r\n                                    </div>\r\n                                    <div className=\"mode2-right\">\r\n                                        <div className=\"mode2-news\">\r\n                                            <div className=\"news-title\">\r\n                                            <a className=\"news-link\" href={i.source_url}>{i.title}</a>\r\n                                        </div>\r\n                                        <div className=\"news-footer\">\r\n                                            <div className=\"news-footer-left\">\r\n                                                <a className=\"news-tag tag-politic\" href=\"#!\">{i.tag}</a>\r\n                                                <a className=\"news-media-img\" href={i.url}><img src={i.source_img} /></a>\r\n                                                <a className=\"news-about\" href={i.url}>&nbsp;{i.source}&nbsp;·</a>\r\n                                                <a className=\"news-about\" href=\"#!\">&nbsp;{i.comments}评论&nbsp;·</a>\r\n                                                <span className=\"news-time\">&nbsp;{DateDiff(i.time)}</span>\r\n                                            </div>\r\n                                            <div className=\"news-footer-right\">\r\n                                                <div className=\"dislike\">\r\n                                                    <span className=\"close\">X</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }\r\n                        \r\n                    })}\r\n                </div>\r\n            </div>\r\n            <style jsx>{`\r\n               .center-content {\r\n                width: 660px;\r\n                display: inline-block;\r\n                margin: 0 auto;\r\n                }\r\n                \r\n                .mode1 {\r\n                    padding: 10px 0;\r\n                    border-bottom: 1px solid #e8e8e8;\r\n                }\r\n                \r\n                .news-title {\r\n                    font-size: 20px;\r\n                    margin-bottom: 4px;\r\n                    line-height: 1.3;\r\n                    font-weight: 700;\r\n                    max-height: 52px;\r\n                    overflow: hidden;\r\n                    text-overflow: ellipsis;\r\n                    display: -webkit-box;\r\n                    -webkit-box-orient: vertical;\r\n                    -webkit-line-clamp: 2;\r\n                }\r\n                \r\n                .news-link {\r\n                    color: #222;\r\n                }\r\n                \r\n                .news-footer {\r\n                    color: #999;\r\n                    margin-top: 10px;\r\n                    height: 20px;\r\n                }\r\n                \r\n                .news-footer-left {\r\n                    display: inline-block;\r\n                    vertical-align: middle;\r\n                    line-height: 20px;\r\n                    font-size: 0;\r\n                }\r\n                \r\n                .news-footer-left>* {\r\n                    display: inline-block;\r\n                    vertical-align: middle;\r\n                    line-height: 1;\r\n                    font-size: 14px;\r\n                }\r\n                \r\n                .news-tag {\r\n                    font-size: 12px;\r\n                    margin-right: 10px;\r\n                    padding: 1px 2px;\r\n                    border: 1px solid #87a5b5;\r\n                    color: #87a5b5;\r\n                }\r\n                \r\n                .tag-video {\r\n                    border: 1px solid #ff7920;\r\n                    color: #ff7920;\r\n                }\r\n                \r\n                .news-media-img {\r\n                    width: 18px;\r\n                    height: 18px;\r\n                    margin-right: 2px;\r\n                    border-radius: 50%;\r\n                    overflow: hidden;\r\n                }\r\n                \r\n                .news-media-img img {\r\n                    width: 18px;\r\n                    height: 18px;\r\n                    border-radius: 50%;\r\n                }\r\n                \r\n                .news-about {\r\n                    font-size: 14px;\r\n                    color: #777;\r\n                }\r\n                \r\n                .news-time {\r\n                    color: #777;\r\n                }\r\n                \r\n                .mode2 {\r\n                    height: 102px;\r\n                    padding: 10px 0;\r\n                    border-bottom: 1px solid #e8e8e8;\r\n                }\r\n                \r\n                .mode2-left {\r\n                    width: 158px;\r\n                    height: 102px;\r\n                    margin-right: 16px;\r\n                    overflow: hidden;\r\n                    float: left;\r\n                }\r\n                \r\n                .mode2-img {\r\n                    display: inline-block;\r\n                    position: relative;\r\n                    transform-style: preserve-3d;\r\n                }\r\n                \r\n                .mode2-img>img {\r\n                    width: 158px;\r\n                    height: 102px;\r\n                    transition: all 0.5s;\r\n                }\r\n                \r\n                .video-tip {\r\n                    position: absolute;\r\n                    right: 8px;\r\n                    bottom: 8px;\r\n                    padding: 0 6px 0 18px;\r\n                    background-color: rgba(0, 0, 0, 0.7);\r\n                    border-radius: 10px;\r\n                    font-size: 12px;\r\n                    color: #fff;\r\n                    height: 22px;\r\n                    line-height: 22px;\r\n                }\r\n                \r\n                .video-tip::before {\r\n                    content: \"\";\r\n                    position: absolute;\r\n                    top: 7px;\r\n                    left: 8px;\r\n                    border-style: solid;\r\n                    border-width: 5px;\r\n                    border-color: transparent transparent transparent #fff;\r\n                }\r\n                \r\n                .mode2-right {\r\n                    overflow: hidden;\r\n                    height: 100%;\r\n                    position: relative;\r\n                }\r\n                \r\n                .mode2-news {\r\n                    display: inline-block;\r\n                    width: 100%;\r\n                    vertical-align: middle;\r\n                    position: absolute;\r\n                    top: 50%;\r\n                    transform: translateY(-50%);\r\n                }\r\n                \r\n                .news-footer-right {\r\n                    float: right;\r\n                }\r\n                \r\n                .dislike {\r\n                    height: 20px;\r\n                    width: 20px;\r\n                }\r\n                \r\n                .close {\r\n                    font-size: 12px;\r\n                    color: #ddd;\r\n                }\r\n            `}</style>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}