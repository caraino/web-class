{"ast":null,"code":"var _jsxFileName = \"D:\\\\vscode\\\\projects\\\\homework\\\\lesson-4-homework\\\\react_lunbo\\\\src\\\\app.jsx\";\nimport React, { Component } from 'react';\nimport SliderItem from './components/SliderItem';\nimport SliderDots from './components/SliderDots';\nimport SliderArrows from './components/SliderArrows';\nimport './app.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class app extends Component {\n  constructor() {\n    super();\n    this.myRef = /*#__PURE__*/React.createRef();\n    this.state = {\n      nowLocal: 0,\n      startX: \"\",\n      moveX: \"\",\n      time: 0,\n      distance: 0,\n      //移动距离\n      distanceMin: 50 //滑动滚动触发距离\n\n    };\n  }\n\n  //无缝滚动\n  turn(n) {\n    var num = this.state.nowLocal + n;\n    console.log(num); // this.myRef.style.transitionDuration = this.props.speed+'s';\n\n    if (num < 0) {\n      this.myRef.style.transitionDuration = 0 + 's';\n      this.myRef.style.left = -100 * this.props.items.length + '%';\n      setTimeout(() => {\n        // 等动画移除后并且回到了0点  再增加回动画时间（dom刷新一般是30s）\n        this.myRef.style.transitionDuration = this.props.speed + 's'; // 再增加回来这个动画\n\n        num = this.props.items.length - 1;\n        this.setState({\n          nowLocal: num\n        });\n      }, 30);\n      return; //因为设置了setTimeout所以要等待setTimeout后再设置最新状态\n    }\n\n    if (num > this.props.items.length) {\n      this.myRef.style.transitionDuration = 0 + 's';\n      this.myRef.style.left = 0 + '%';\n      setTimeout(() => {\n        // 等动画移除后并且回到了0点  再增加回动画时间（dom刷新一般是30s）\n        this.myRef.style.transitionDuration = this.props.speed + 's'; // 再增加回来这个动画\n\n        num = 1;\n        this.setState({\n          nowLocal: num\n        });\n      }, 30);\n      return; //因为设置了setTimeout所以要等待setTimeout后再设置最新状态\n    }\n\n    this.setState({\n      nowLocal: num\n    });\n  } //鼠标拖动\n\n\n  touchStart(e) {\n    this.setState({\n      time: 0,\n      startX: e.touches[0].pageX\n    });\n  }\n\n  touchMove(e) {\n    e.preventDefault();\n    clearInterval(this.autoPlayFlag);\n    var w = this.props.size + 'vw';\n\n    var _moveX = e.touches[0].pageX - this.state.startX;\n\n    var _distance = -(this.state.nowLocal * w - _moveX);\n\n    this.setState({\n      moveX: _moveX,\n      time: 0,\n      distance: _distance\n    });\n  }\n\n  touchEnd(e) {\n    if (Math.abs(this.state.moveX) <= this.state.distanceMin) {\n      this.turn(0);\n    } else {\n      if (this.state.moveX > this.state.distanceMin) {\n        this.turn(1);\n      } else if (Math.abs(this.state.moveX) > this.state.distanceMin) {\n        this.turn(-1);\n      }\n    }\n\n    this.setState({\n      moveX: 0\n    });\n  } // 开始自动轮播\n\n\n  goPlay() {\n    if (this.props.autoplay) {\n      this.autoPlayFlag = setInterval(() => {\n        this.turn(1);\n      }, this.props.delay * 1000);\n    }\n  } // 暂停自动轮播\n\n\n  pausePlay() {\n    clearInterval(this.autoPlayFlag);\n  }\n\n  componentDidMount() {\n    this.goPlay();\n  }\n\n  render() {\n    let count = this.props.items.length;\n    let itemNodes = this.props.items.map((item, idx) => {\n      return /*#__PURE__*/_jsxDEV(SliderItem, {\n        item: item,\n        count: count\n      }, 'item' + idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 20\n      }, this);\n    });\n    let item1 = /*#__PURE__*/React.cloneElement(itemNodes[0]);\n\n    let arrowsNode = /*#__PURE__*/_jsxDEV(SliderArrows, {\n      turn: this.turn.bind(this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 26\n    }, this);\n\n    let dotsNode = /*#__PURE__*/_jsxDEV(SliderDots, {\n      turn: this.turn.bind(this),\n      count: count,\n      nowLocal: this.state.nowLocal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 24\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slider\",\n      style: {\n        width: this.props.size + 'px'\n      },\n      onMouseOver: this.props.pause ? this.pausePlay.bind(this) : null,\n      onMouseOut: this.props.pause ? this.goPlay.bind(this) : null,\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        ref: e => this.myRef = e,\n        style: {\n          left: -100 * this.state.nowLocal + \"%\",\n          transitionDuration: this.props.speed + \"s\",\n          width: (this.props.items.length + 1) * 100 + \"%\"\n        },\n        children: [itemNodes, item1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), this.props.arrows ? arrowsNode : null, this.props.dots ? dotsNode : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this);\n  }\n\n}\napp.defaultProps = {\n  speed: 1,\n  delay: 2,\n  pause: true,\n  autoplay: true,\n  dots: true,\n  arrows: true,\n  items: [],\n  size: 500\n};\napp.autoPlayFlag = null;","map":{"version":3,"sources":["D:/vscode/projects/homework/lesson-4-homework/react_lunbo/src/app.jsx"],"names":["React","Component","SliderItem","SliderDots","SliderArrows","app","constructor","myRef","createRef","state","nowLocal","startX","moveX","time","distance","distanceMin","turn","n","num","console","log","style","transitionDuration","left","props","items","length","setTimeout","speed","setState","touchStart","e","touches","pageX","touchMove","preventDefault","clearInterval","autoPlayFlag","w","size","_moveX","_distance","touchEnd","Math","abs","goPlay","autoplay","setInterval","delay","pausePlay","componentDidMount","render","count","itemNodes","map","item","idx","item1","cloneElement","arrowsNode","bind","dotsNode","width","pause","arrows","dots","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport SliderItem from './components/SliderItem'\r\nimport SliderDots from './components/SliderDots'\r\nimport SliderArrows from './components/SliderArrows'\r\nimport './app.css'\r\n\r\nexport default class app extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            nowLocal: 0,\r\n\r\n            startX: \"\",\r\n            moveX: \"\",\r\n            time: 0,\r\n            distance: 0, //移动距离\r\n            distanceMin: 50, //滑动滚动触发距离\r\n        };\r\n    }\r\n    \r\n\r\n    myRef=React.createRef();\r\n\r\n    //无缝滚动\r\n    turn(n) {\r\n        var num = this.state.nowLocal+n;\r\n        console.log(num)\r\n        // this.myRef.style.transitionDuration = this.props.speed+'s';\r\n        if(num <0) {\r\n            this.myRef.style.transitionDuration = 0+'s';\r\n            this.myRef.style.left=-100 * this.props.items.length + '%';\r\n            setTimeout(()=>{// 等动画移除后并且回到了0点  再增加回动画时间（dom刷新一般是30s）\r\n                this.myRef.style.transitionDuration = this.props.speed+'s';// 再增加回来这个动画\r\n                num = this.props.items.length-1;\r\n                this.setState({nowLocal: num});\r\n            },30)\r\n            return;//因为设置了setTimeout所以要等待setTimeout后再设置最新状态\r\n            \r\n        }\r\n        if(num > this.props.items.length) {\r\n            this.myRef.style.transitionDuration = 0+'s';\r\n            this.myRef.style.left=0 + '%';\r\n            setTimeout(()=>{// 等动画移除后并且回到了0点  再增加回动画时间（dom刷新一般是30s）\r\n                this.myRef.style.transitionDuration = this.props.speed+'s';// 再增加回来这个动画\r\n                num = 1;\r\n                this.setState({nowLocal: num});\r\n            },30)\r\n            return;//因为设置了setTimeout所以要等待setTimeout后再设置最新状态\r\n        }\r\n        this.setState({nowLocal: num});\r\n\r\n        \r\n    }\r\n\r\n    //鼠标拖动\r\n    touchStart (e) {\r\n\t\tthis.setState({\r\n\t\t\ttime: 0,\r\n\t\t\tstartX: e.touches[0].pageX\r\n\t\t})\r\n\t}\r\n\r\n    \r\n\r\n\ttouchMove (e) {\r\n\t\te.preventDefault()\r\n\t\tclearInterval(this.autoPlayFlag);\r\n\r\n        var w=this.props.size+'vw';\r\n\t\tvar _moveX = e.touches[0].pageX - this.state.startX\r\n\t\tvar _distance = -(this.state.nowLocal * w- _moveX)\r\n\r\n\t\tthis.setState({\r\n\t\t\tmoveX: _moveX,\r\n\t\t\ttime: 0,\r\n\t\t\tdistance: _distance\r\n\t\t})\r\n\t}\r\n\r\n\ttouchEnd (e) {\r\n\t\tif(Math.abs(this.state.moveX) <= this.state.distanceMin) {\r\n\t\t\tthis.turn(0)\r\n\t\t} else {\r\n\t\t\tif(this.state.moveX > this.state.distanceMin) {\r\n\t\t\t\tthis.turn(1)\r\n\t\t\t} else if(Math.abs(this.state.moveX) > this.state.distanceMin) {\r\n\t\t\t\tthis.turn(-1)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tmoveX: 0\r\n\t\t})\r\n\t}\r\n\r\n    // 开始自动轮播\r\n    goPlay() {\r\n        if(this.props.autoplay) {\r\n            this.autoPlayFlag = setInterval(() => {\r\n                this.turn(1);\r\n            }, this.props.delay * 1000);\r\n        }\r\n    }\r\n\r\n    // 暂停自动轮播\r\n    pausePlay() {\r\n        clearInterval(this.autoPlayFlag);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.goPlay();\r\n    }\r\n\r\n    render() {\r\n        let count = this.props.items.length;\r\n\r\n        let itemNodes = this.props.items.map((item, idx) => {\r\n            return <SliderItem item={item} count={count} key={'item' + idx} />;\r\n        });\r\n\r\n        let item1=React.cloneElement(itemNodes[0]);\r\n\r\n        let arrowsNode = <SliderArrows turn={this.turn.bind(this)}/>;\r\n\r\n        let dotsNode = <SliderDots turn={this.turn.bind(this)} count={count} nowLocal={this.state.nowLocal} />;\r\n\r\n        return (\r\n            <div className=\"slider\" style={{width:this.props.size+'px'}}\r\n            onMouseOver={this.props.pause?this.pausePlay.bind(this):null} onMouseOut={this.props.pause?this.goPlay.bind(this):null}>\r\n                <ul ref={e=>(this.myRef=e)} style={{\r\n                        left: -100 * this.state.nowLocal + \"%\",\r\n                        transitionDuration: this.props.speed + \"s\",\r\n                        width: (this.props.items.length+1) * 100 + \"%\"\r\n                    }}>\r\n                    {itemNodes}\r\n                    {item1}\r\n                </ul>\r\n                {this.props.arrows?arrowsNode:null}\r\n                {this.props.dots?dotsNode:null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\napp.defaultProps = {\r\n    speed: 1,\r\n    delay: 2,\r\n    pause: true,\r\n    autoplay: true,\r\n    dots: true,\r\n    arrows: true,\r\n    items: [],\r\n    size:500,\r\n};\r\n\r\napp.autoPlayFlag = null;\r\n"]},"metadata":{},"sourceType":"module"}